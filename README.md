# #BackendDeLaSuerte 2023


> Desaf√≠o de programaci√≥n dividido en tres retos donde los participantes tendr√°n que trabajar con el backend que les toque en suerte, aunque podr√°n elegir el lenguaje de programaci√≥n con el que quieren trabajar. 

![backenddelasuerte2023](https://user-images.githubusercontent.com/1122071/223094282-d3db3828-60df-45d8-9723-acb41c4f8ec5.jpeg)



Bienvenid@s a un nuevo reto de programaci√≥n de la comunidad malandriner.

Propondremos 3 retos en 3 semanas y remataremos con una sesi√≥n en directo prime para celebrar una nueva fiesta del c√≥digo.

## Participantes

üëâ [Ver issues](https://github.com/webreactiva-devs/backend-de-la-suerte-2023/issues)

| Nick | Backend | Reto 1 | Reto 2 | Reto 3 | Directo | Total |
| --- | --- | --- | --- | --- | --- | -- |
| Karlos | Xata |  |  |  |  |  |
| Jos√© √Ångel Mart√≠nez | Cloudflare D1 |  |  |  |  |  |
| Jos√© Manuel G√≥mez | CockroachDB |  |  |  |  |  |
| Juan Andr√©s Jim√©nez | Planetscale |  |  |  |  |  |
| Sergi Edo | Troleado |  |  |  |  |  |
| Imanol Valero | Planetscale |  |  |  |  |  |
| Yuri | SurrealDB |  |  |  |  |  |
| Alfredo | EdgeDB |  |  |  |  |  |
| David Galisteo | Pocketbase |  |  |  |  |  |
| SergioPb | Xata |  |  |  |  |  |
| Andr√©s Cabrera QuieroMiTaza | FaunaDB |  |  |  |  |  |
| Borja	 | Troleado |  |  |  |  |  |
| Cesar Octavio Delgado | KeyDB |  |  |  |  |  |
| Ram√≥n Ruiz | Pocketbase |  |  |  |  |  |
| Oliver | Cloudflare D1 |  |  |  |  |  |



&nbsp;

----

&nbsp;

## Te contar√© una historia

Has abierto una Cocina para Zombies.

Los zombies est√°n hartos de comer cerebros. No han ampliado su dieta desde hace siglos y las redes sociales les han empujado a querer tener una vida m√°s moderna.

Quieren salir por ah√≠, tener vida social, divertirse sin riesgos.

Y tienen dinero en el bolsillo, siempre que tengan carne en la pierna, claro.

Tu misi√≥n va a ser crear un buen sistema para que cuando pidan su men√∫ no se enfaden. Claro, cuando se enfadan ya sabes, te comen el cerebro...




## Mec√°nica del desaf√≠o

Se trata de trabajar con las herramientas que m√°s te gusten y solo una impuesta: el backend.

üî¥ No es necesario pagar por los backends. La parte gratuita deber√≠a ser suficiente para usarla en el desaf√≠o.

üî¥ No es olbigatorio crear un frontend. Puede ser una API o cualquier otro sistema que te permita trabajar con el backend que no sea el el mismo backend.

üî¥ Puedes utilizar el lenguaje o plataforma que quieras para conectarte a tu backend y crear la aplicaci√≥n.

### Punto de inicio

Hemos sorteado entre los participantes una lista de backends poco conocidas. 

### Retos

Se propondr√°n 3 retos, uno por semana.

Cada reto se podr√° resolver con la tecnolog√≠a que m√°s te guste salvo la parte del Backend, como ya se ha explicado anteriormente.

En cada reto se ganan unos puntos si es superado.

Los puntos se acumulan en la clasificaci√≥n y son "boletos" para el sorteo de premios que se celebrar√° el d√≠a de cierre del desaf√≠o.

------------

&nbsp;

## C√≥mo participar en cada reto

Al ser esta una prueba donde cada uno puede realizar el ejercicio como quiera lo haremos de la siguiente forma.

1. Haz un fork de este repositorio si quieres
2. Trabaja contra ese repositorio de forma independiente, NO haremos uso del PR para unir las soluciones, las publicaremos como parte de este Readme
3. La soluci√≥n debe tener el c√≥digo p√∫blico para que podamos verla.
4. Con cada reto tendr√°s que enviar una [Issue](https://github.com/webreactiva-devs/backend-de-la-suerte-2023/issues) indicando la direcci√≥n del repositorio con la soluci√≥n

------------

&nbsp;

### #TeamTroleado

Un Zombie ha entrado en la cocina y se ha merendado la terminal. La confundi√≥ con un cerebro, menudo trol tolai...

As√≠ que los "troleados" ten√©is que resolver el desaf√≠o con estas condiciones de emergencia:

- Solo pod√©is utilizar un fichero de texto plano con extensi√≥n .menu
- No pod√©is utilizar ninguna base de datos ni API externa para el almacenamiento
- No pod√©is usar ni CSV, JSON, YAML... Ni ning√∫n otro formato conocido
- No pod√©is usar variables serializadas con las herramientas de vuestro c√≥digo
- Quiz√°s aparezca alguna condici√≥n m√°s ;)

------------

&nbsp;

![6409974cce829832393392](https://user-images.githubusercontent.com/1122071/223962884-3ed576cc-cd23-48fd-b543-00c2489bb4cb.gif)


## Reto 1: Hasta los zombies tienen cerebro

Te ha tocado un backend en suerte y tienes que ponerlo a trabajar.

El primer reto es muy sencillo. 

Tienes que crear una aplicaci√≥n que se conecte con tu backend para registrar la comanda.

üî¥ SOLO vamos a guardar un dato: la fecha y la hora en la que se ha registrado la comanda.

NADA M√ÅS. Ni platos ni mesas ni nada, ¬°¬°no te adelantes!!

Dos requisitos:

- Debe poderse almacenar la fecha de la comanda
- Debe poderse leer la √∫ltima fecha de la comanda

NADA M√ÅS. 

En el segundo reto haremos m√°s cosas con esto, no te aceleres, que los zombies (al menos los de este mundo) van muuuuy lentos ;)

&nbsp;

### Reparto de puntos

- 20 puntos si entregas el resultado antes del d√≠a 16 de Marzo (inclusive)
- 10 puntos si lo entregas despu√©s.

M√°ximo de puntos en este reto: 20.

### ¬øQu√© pasa si el backend que me ha tocado no funciona?

Habla con Dani ;)

&nbsp;

------------

&nbsp;

## Reto 2: O√≠do cocina

El sistema est√° listo, ¬°pong√°moslo a trabajar!

Tu sistema de captura de comandas tiene que ampliarse y guardar comandas en un formato como este:

````
Order {
  table: Number
  createdAt: Date
  dishes: [
    {
      name: String,
      quantity: Number
    }
  ]
}
````

- `Number` es entero
- `Date` en formato ISO-8601 UTC Zero (Ejemplo: 2023-03-15T13:03:42Z)
- `createdAt` es el momento en el que entra la comanda en el sistema
- `dishes` es una colecci√≥n de platos, con nombre y cantidades

**Requisitos**

- Las comandas se acumulan en forma de cola, la primera que entra es la m√°s prioritaria (FIFO).
- No hay l√≠mite de platos en cada comanda.
- Tienes que fijar un l√≠mite en el m√°ximo de comandas asumibles por la cocina. Por ejemplo, 5.
- Cuando se llega al l√≠mite, no se aceptan m√°s comandas y se env√≠a un mensaje de error.
- Solo puedes procesar las comandas borr√°ndolas todas a la vez (esto cambiar√° en el Reto 3, pero no sabes c√≥mo, no te adelantes)

**Imprescindible**

- Si entra el plato "ESPECIAL ZOMBIE" inmediatamente pasa a estar el primero en la cola.

**Interfaz**

- En la API, web o app que est√©s montando tienen que verse las comandas en el orden adecuado

**Requisito memorable**

- Tienes que elaborar un men√∫ con al menos 4 platos especiales para Zombies. Ponle cari√±o e imaginaci√≥n ;)

&nbsp;

### Reparto de puntos

- 20 puntos si entregas el resultado antes del d√≠a 25 de Marzo (inclusive)
- 10 puntos si lo entregas despu√©s.

M√°ximo de puntos en este reto: 20 (de momento, durante la pr√≥xima semana habr√° sorpresa)

&nbsp;

------------

&nbsp;

## Reto 3: Un zombie entra en la cocina

> Hay una opci√≥n a ganar 20 puntos sin tocar una l√≠nea de c√≥digo (consulta el grupo de Telegram para saber c√≥mo)

### Primera parte:

Una cocina donde las comandas no se despachan ni es cocina ni es nada. Por muy zombie que sea.

As√≠ que es el momento de a√±adir esa feature ü•≥




Consideraremos una cola FIFO: First In, First Out

Para el orden las mismas condiciones vistas en el reto 2:

- Ordenamos por fecha gracias al campo `createdAt`
- Si entra un "ESPECIAL ZOMBIE" se cuela siempre la primera

Las comandas desaparecen de esa lista en orden y se les puede a√±adir un campo nuevo `dispatchedAt` para almacenar el momento en el que desaparecen de la comanda. 

Tu misi√≥n que crear un comando, ruta o lo que sea para que se produzca ese "despacho" de la comanda 1 por 1 y se almacene el cambio en tu #BackendDeLaSuerte.

### Segunda parte:

¬°¬°¬°Un zombie se ha colado en tu cocina!!!

Vamos a simular que un zombie se cuela en tu sistema de comandas y altera tus datos. Va a intentar modificar la fecha en la que la comanda ha sido creada en tu sistema.

Tendr√°s que crear un m√©todo usando tu backend que permita protegerse de estos bichos comecerebros...

&nbsp;


**¬øC√≥mo lo haremos?**

Como no me puedo colar en tu c√≥digo, simularemos al zombie haciendo una llamada a una API.

Cada vez que hayas creado una comanda tendr√°s que llamar a este endpoint:

```
https://zombie-entrando-cocina.vercel.app/api/zombie/1
```

Hay dos respuestas posibles:

1- El zombie pasa de largo

2- El zombie te escupe en la cara

En este segundo caso ver√°s un mensaje que contiene una fecha aleatoria de Marzo de 2023. Tendr√°s que capturarla y asig√°nrsela a la comanda en el campo `createdAt`. Al Zombie solo le llega el cerebro para cambiarte el d√≠a, no la hora.

El requisito de esta prueba es lograr recuperar la fecha  `createdAt` original si ha sido alterada por el Zombie.


&nbsp;

### Reparto de puntos

- 20 puntos si entregas el resultado antes del d√≠a del directo
- 20 puntos m√°s si realizas la segunda parte de este reto 3
- 20 punto m√°s si a√±ades 3 tests que comprueben el funcionamiento del reto 3 (de la parte 1 o la 2) 

M√°ximo de puntos en este reto: 60


------------

&nbsp;

## Directo (30 de Marzo): 

- 20 puntos m√°s si presentas tus soluciones en directo
